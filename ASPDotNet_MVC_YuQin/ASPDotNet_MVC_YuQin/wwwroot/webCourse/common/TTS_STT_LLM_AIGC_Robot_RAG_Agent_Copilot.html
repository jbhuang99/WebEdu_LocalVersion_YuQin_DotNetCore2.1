<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>语音对话机器人(查找Search_人工智能AIGC_检索增强生成RAG_智能代理Agent_大思维语言模型LLM_机器人Robot_副驾Copilot)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            text-align: center;
        }

        #transcriptSystemInternal {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            min-height: 100px;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
            white-space: pre-wrap;
            background-color: #f9f9f9;
            overflow-y: auto;
            vertical-align: top;
        }

        #transcriptSystemExternal {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            min-height: 100px;
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            text-align: left;
            white-space: pre-wrap;
            background-color: #f9f9f9;
            overflow-y: auto;
            vertical-align: top;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
        }

            button:disabled {
                background-color: #ccc;
                cursor: not-allowed;
            }
    </style>
    <script src="script/TTS_STT_LLM_AIGC_Robot.js"></script>
    <script src="script/Accuracy-Similarity.js"></script>
</head>

<body onload="fnOnLoad()">
    <div style="font-size:24px;font-weight:bolder">语音对话机器人<span style="font-size:16px">（面向远程听觉的麦克风扬声器/忽略近程视觉的屏幕键盘鼠标）</span></div>
    
    <table style="width:100%; border:dashed">
        <tr>
            <td id="tdSystemInternal" style="width: 50%; border: dashed;vertical-align:top">
                <div style="font-size:24px;font-weight:bolder;color:goldenrod" id="btnSystemInternal">系统内部语音对话<span style="font-size: 16px; font-weight: normal">【我们←（严谨准确性学科专业）语音互动（搜索匹配本系统的静态存储的数据读写、而非上下文追问AIGC的接受教育进行学习的自主生成的数据读写）→本系统】</span> </div>
                <div>
                <button id="closeSTTSystemInternal" onclick="window.close();">单击关闭当前语音互动本系统，切换回到面向视觉的屏幕键盘鼠标互动本系统</button>
                </div>
                <button id="startBtnSystemInternal" title="单击将开始打开麦克风录音，系统将自动根据您录音的停顿状态，识别语音，返回对话。非流式语音对话、流式语音对话。期待本系统语音识别您的语音指令，然后打开“作业测验”，进行语音识别答题、评分等等....正在完善之中...">开始录音对话</button>
                <button id="stopBtnSystemInternal" title="单击将停止录音对话" disabled>停止录音对话</button>
                <div id="transcriptSystemInternal">
                    {
                    "段落": [期待本系统语音识别您的语音指令，然后打开“作业测验”，进行语音识别答题、评分等等....正在完善之中...]
                    }
                </div>
            </td>
            <td id="tdSystemExternal" style="width: 50%; border: dashed;vertical-align:top">

                <div style="font-size:24px;font-weight:bolder;color:goldenrod" id="btnSystemExternal">
                    系统外部语音对话<span style="font-size:16px;font-weight:normal">【我们←（宽泛概率性闲聊日常）语音互动（上下文追问AIGC的接受教育进行学习的自主生成的数据读写、而非搜索匹配静态存储的数据读写）→AIGC】</span></div>
                <div>
                     <input id="idQwenAPIKeyInput" type="password" placeholder="必须在这里键入登录AIGC的API Key，然后单击确定按钮" title="必须在这里键入登录AIGC的API Key，然后单击确定按钮"/><button id="idQwenAPIKeyConfirm" title="必须在密码框中键入登录AIGC的API Key，然后单击本按钮" style="white-space: normal;color:green;font-size:12px">确定【Qwen千问的付费API Key】</button>
                    <div></div>
                    <button id="closeSTTSystemExternal" onclick='if(document.getElementById("sVisionAIGC_RAG_Agent").style.display=="none"){document.getElementById("sVisionAIGC_RAG_Agent").style.display="block"} else{document.getElementById("sVisionAIGC_RAG_Agent").style.display="none"}' style="white-space: normal;">单击切换显示面向视觉的屏幕键盘鼠标互动系统外部AIGC，此时也可语音互动系统外部AIGC</button>
                </div>
                <div id="sVisionAIGC_RAG_Agent" style="display: none; border:solid;border-color:brown">
                    <textarea style="width:90%">这里将显示您键入的Prompt(例如：什么是教育数智思维，或，什么是教育技术)，然后，AIGC生成的answer...</textarea>
                    <div><button>确认【Prompt←(互动追问)→他创方的AIGC】</button> <button>取消</button></div>
                    <p></p>
                    <textarea style="width:90%">这里将显示您键入的关键词(例如：教育数智思维，或，教育技术)，然后，知识库查询匹配的answer...</textarea>
                    <div><button>确认【关键词←(互动检索)→自创方的知识库】</button> <button>取消</button></div>
                    <p></p>
                    <ol>
                        <div style="text-align:justify">
                            <li> <input type="button" value="单击切换显示：AIGC生成回答(视觉字符)←对比→知识库检索匹配(视觉字符)" onclick='if(document.getElementById("AIGCCharactor").style.display=="none"){document.getElementById("AIGCCharactor").style.display="block"} else{document.getElementById("AIGCCharactor").style.display="none"}' /></li>
                    </div>
                        <div id="AIGCCharactor" style="display: none; border: dashed;border-color: goldenrod; text-align: justify ">
                            <div style="text-align:center"><textarea id="sAIGCString" style="width:90%">这里粘贴AIGC生成的字符序列...</textarea></div>
                            <div style="text-align:center"><textarea id="sKnowledgebaseString" style="width: 90%">这里粘贴知识库搜索匹配的对比字符序列...</textarea></div>
                            <div><button style="color:green;font-size:12px" onclick='document.getElementById("sAccuracySimilarityForString").textContent=fnStringSimilarity(document.getElementById("sAIGCString").value,document.getElementById("sKnowledgebaseString").value);'>准确性相似度：</button><span id="sAccuracySimilarityForString">这里将显示上述两个字符序列的准确性相似度</span></div>
                        </div>
                        <div></div>
                        <div style="text-align:justify">
                            <li> <input type="button" value="单击切换显示：AIGC生成回答(视觉图像)(.jpeg或.png文件为例)←对比→知识库检索匹配(视觉图像)(.jpeg或.png文件为例)" onclick='if(document.getElementById("AIGCPixelImage").style.display=="none"){document.getElementById("AIGCPixelImage").style.display="block"} else{document.getElementById("AIGCPixelImage").style.display="none"}' /></li>
                        </div>
                        <div id="AIGCPixelImage" style="display: none;border:dashed;border-color:goldenrod;text-align:justify">
                            <div style="border:dashed;border-color:green">
                                <label>上传AIGC生成的.jpeg或.png图像文件(或者文本框中键入.jpeg或.png图像文件的URL)： </label><input type="text" id="sPixelImageFromAIGC" value="https://localhost:5001/webCourse/options/Accuracy-Similarity/Cone-of-Experience-FromAIGC-willTransformToFiveLayeredMVC.jpg" />
                                <div style="text-align:center"><img id="sShowPixelImageFromAIGC" style="width:50px;height:50px" src="https://localhost:5001/webCourse/options/Accuracy-Similarity/Cone-of-Experience-FromAIGC-willTransformToFiveLayeredMVC.jpg" onclick='fnViewRealImage("sShowPixelImageFromAIGC");' /></div>
                                <div><input type="file" title='例如，上传“经验之塔”Prompt钉钉AIGC生成的图像，或者，上传自己书写的字符图像可用来评判自己书写的工整性' /> <input type="submit" value="提交" id="idFileSubmit" /></div>
                            </div>
                            <div style="border:dashed;border-color:green">
                                <label>上传知识库搜索匹配的.jpeg或.png图像文件(或者文本框中键入.jpeg或.png图像文件的URL)： </label><input type="text" id="sPixelImageFromKnowledgebase" value="https://localhost:5001/webCourse/options/Accuracy-Similarity/Cone-of-Experience-FromKnowledgebase-willTransformToFiveLayeredMVC.jpg" />
                                <div style="text-align:center"><img id="sShowPixelImageFromKnowledgebase" style="width:50px;height:50px" src="https://localhost:5001/webCourse/options/Accuracy-Similarity/Cone-of-Experience-FromKnowledgebase-willTransformToFiveLayeredMVC.jpg" onclick='fnViewRealImage("sShowPixelImageFromKnowledgebase")' /></div>
                                <div><input type="file" title='例如，上传“经验之塔”关键词搜索匹配本系统知识库检索的图像，或者，上传印刷体的字符图像可用来对比自己书写的工整性' /> <input type="submit" value="提交" id="idFileSubmit" /></div>
                            </div>
                            <div><button style="color:green;font-size:12px" onclick="fnShowAccuraySimilarityForImage();">准确性相似度：</button><span id="sAccuracySimilarityForPixelImage">这里将显示上述两个图像的准确性相似度</span></div>
                        </div>
                        <div></div>
                        <div style="text-align:justify">
                            <li> <input type="button" value="单击切换显示：AIGC生成回答(视觉视频)(.mp4文件为例)←对比→知识库检索匹配(视觉视频)(.mp4文件为例)（开发之中...）" onclick='if(document.getElementById("AIGCVideo").style.display=="none"){document.getElementById("AIGCVideo").style.display="block"} else{document.getElementById("AIGCVideo").style.display="none"}' /></li>
                        </div>
                        <div id="AIGCVideo" style="display: none;border:dashed;border-color:goldenrod;text-align:justify">
                            <div><button style="color:green;font-size:12px">AIGC生成的文件：</button></div>
                            <div><button style="color:green;font-size:12px">知识库搜索匹配的对比文件：</button></div>
                            <div><button style="color:green;font-size:12px">准确性相似度：</button></div>
                        </div>
                        <div></div>
                        <div style="text-align:justify">
                            <li> <input type="button" value="单击切换显示：AIGC生成回答(视觉2D)(.svg文件为例)←对比→知识库检索匹配(视觉2D)(.svg文件为例)（开发之中...）" onclick='if(document.getElementById("AIGC2D").style.display=="none"){document.getElementById("AIGC2D").style.display="block"} else{document.getElementById("AIGC2D").style.display="none"}' /></li>
                        </div>
                        <div id="AIGC2D" style="display: none;border:dashed;border-color:goldenrod;text-align:justify">
                            <div><button style="color:green;font-size:12px">AIGC生成的文件：</button></div>
                            <div><button style="color:green;font-size:12px">知识库搜索匹配的对比文件：</button></div>
                            <div><button style="color:green;font-size:12px">准确性相似度：</button></div>
                        </div>
                        <div></div>
                        <div style="text-align:justify">
                            <li>  <input type="button" value="单击切换显示：AIGC生成回答(视觉3D)(.vx3d文件为例)←对比→知识库检索匹配(视觉3D)(.vx3d文件为例)（开发之中...）" onclick='if(document.getElementById("AIGC3D").style.display=="none"){document.getElementById("AIGC3D").style.display="block"} else{document.getElementById("AIGC3D").style.display="none"}' /></li>
                        </div>
                        <div id="AIGC3D" style="display: none;border:dashed;border-color:goldenrod;text-align:justify">
                            <div><button style="color:green;font-size:12px">AIGC生成文件：</button></div>
                            <div><button style="color:green;font-size:12px">知识库搜索匹配的对比文件：</button></div>
                            <div><button style="color:green;font-size:12px">准确性相似度：</button></div>
                        </div>
                        <div></div>
                        <div style="text-align:justify">
                            <li> <input type="button" value="单击切换显示：AIGC生成回答(听觉音频)(.mp3或.midi文件为例)←对比→知识库检索匹配(听觉音频)(.mp3或.midi文件为例)" onclick='if(document.getElementById("AIGCAudio").style.display=="none"){document.getElementById("AIGCAudio").style.display="block"} else{document.getElementById("AIGCAudio").style.display="none"}' /></li>
                        </div>
                        <div id="AIGCAudio" style="display: none;border:dashed;border-color:goldenrod;text-align:justify">
                            <div style="border:dashed;border-color:green">
                                <label>上传AIGC生成的.mp3音频文件(或者文本框中键入.mp3音频文件的URL)： </label><input type="text" id="sAudioFromAIGC" value="https://localhost:5001/webCourse/options/Accuracy-Similarity/EducationalTechnologyFromAIGC.m4a" />
                                <div style="text-align:center"><audio id="sShowAudioFromAIGC" style="width:50px;height:50px" src="https://localhost:5001/webCourse/options/Accuracy-Similarity/EducationalTechnologyFromAIGC.m4a" controls /></div>
                                <div><input type="file" title='例如，上传“普通话等级”Prompt钉钉AIGC生成的音频，或者，上传自己朗读的“普通话等级”的音频' /> <input type="submit" value="提交" id="idFileSubmit" /></div>
                            </div>
                            <div style="border:dashed;border-color:green">
                                <label>上传知识库搜索匹配的对比.mp3音频文件(或者文本框中键入.mp3音频文件的URL)： </label><input type="text" id="sAudioFromKnowledgebase" value="https://localhost:5001/webCourse/options/Accuracy-Similarity/EducationalTechnologyFromKnowledgebase.m4a" />
                                <div style="text-align:center"><audio id="sShowAudioFromKnowledgebase" style="width:50px;height:50px" src="https://localhost:5001/webCourse/options/Accuracy-Similarity/EducationalTechnologyFromKnowledgebase.m4a" controls /></div>
                                <div><input type="file" title='例如，上传字典的“普通话等级”发音音频，可用作评判自己朗读“普通话等级”的标准' /> <input type="submit" value="提交" id="idFileSubmit" /></div>
                            </div>
                            <div><button style="color:green;font-size:12px" onclick="fnShowAccuraySimilarityForAudio();">准确性相似度：</button><span id="sAccuracySimilarityForAudio">这里将显示上述两个音频的准确性相似度</span></div>
                        </div>
                        <div style="text-align:justify">
                            <li><div><input type="button" value="单击切换显示：AIGC生成回答(触觉)←对比→知识库检索匹配(触觉)（目前尚无法实现...）" /></div></li>
                        </div>
                        <div style="text-align:justify">
                            <li><div><input type="button" value="单击切换显示：AIGC生成回答(嗅觉)←对比→知识库检索匹配(嗅觉)（目前尚无法实现...）" /></div></li>
                        </div>
                        <div style="text-align:justify">
                            <li> <div><input type="button" value="单击切换显示：AIGC生成回答(味觉)←对比→知识库检索匹配(味觉)（目前尚无法实现...）" /></div></li>
                        </div>
                    </ol>
                </div>


                            <button id="startBtnSystemExternal" title="需要连接AIGC服务，需要付费AIGC...！单击将开始打开麦克风录音，系统将自动根据您录音的停顿状态，识别语音，返回对话。非流式语音对话、流式语音对话。期待本系统语音识别您的语音指令，然后连接AIGC，进行语音识别互动追问AIGC的回答，思辨自己想要的答案....">开始录音对话</button>
                            <button id="stopBtnSystemExternal" title="需要连接AIGC服务，需要付费AIGC...！单击将停止录音对话" disabled>停止录音对话</button>
                            <div id="transcriptSystemExternal">
                                {
                                "段落": [期待本系统语音识别您的语音指令，然后连接AIGC，进行语音识别互动追问AIGC的回答，思辨自己想要的答案....需要付费AIGC...]
                                }
                            </div>
</td>

        </tr>
    </table>

    <!--系统外部的调用AIGC的语音对话注意事项：API 密钥安全性 不要将密钥直接暴露在前端代码中，建议通过后端代理转发请求。兼容性处理 不同大模型（例如，ChatGPT、Qwen）的 API 参数可能略有不同，请参考官方文档调整。

        <script>
    const fetchData = async (prompt) => {
    const response = await fetch('https://api.openai.com/v1/completions', {
    method: 'POST',
    headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer YOUR_API_KEY`
    },
    body: JSON.stringify({
    model: 'gpt-4',
    prompt: prompt,
    max_tokens: 100,
    temperature: 0.7
    //stream: true // 如果启用流式响应
    })
    });

    if (!response.ok) {
    throw new Error('Network response was not ok');
    }

    const data = await response.json();
    console.log(data.choices[0].text); // 输出生成的文本
    };

    fetchData("请为一家餐厅起一个名字");

        </script>
        <script>
    const fetchStreamData = async (prompt) => {
    const response = await fetch('https://api.openai.com/v1/completions', {
    method: 'POST',
    headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer YOUR_API_KEY`
    },
    body: JSON.stringify({
    model: 'gpt-4',
    prompt: prompt,
    stream: true // 启用流式响应
    })
    });

    if (!response.ok) {
    throw new Error('Network response was not ok');
    }

    const reader = response.body.getReader();
    const decoder = new TextDecoder('utf-8');
    let done = false;

    while (!done) {
    const { value, done: readerDone } = await reader.read();
    done = readerDone;
    const chunk = decoder.decode(value, { stream: true });
    console.log(chunk); // 实时输出每块数据
    }
    };

    fetchStreamData("请生成一段关于人工智能的介绍");
        </script>
          -->
</body>

</html>